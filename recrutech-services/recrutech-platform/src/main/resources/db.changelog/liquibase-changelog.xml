<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!--
# Recrutech Platform Service - Database Schema
# Version: 1.1.0 (Phase 1 - Database Separation)
# Author: Efehan Cekic
# Description: Master changelog file for the Recrutech platform service database schema
# 
# This file orchestrates the creation of all platform-specific database tables and constraints
# in the proper dependency order to ensure referential integrity.
#
# Phase 1: Added domain tables (applicants, companies, hr_employees) from auth service separation
-->
<databaseChangeLog xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
                   xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
                   xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog 
                   http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-latest.xsd">

    <!-- 
    ========================================
    VERSION 1.0 - PHASE 1: DOMAIN TABLES
    ========================================
    Domain entities moved from auth service to platform service.
    These tables must be created first as other tables depend on them.
    -->

    <!-- Step 1: Create companies table (no dependencies) -->
    <include file="/db.changelog/v1.0/02-create-companies-table.xml"/>

    <!-- Step 2: Create applicants table (no dependencies) -->
    <include file="/db.changelog/v1.0/01-create-applicants-table.xml"/>

    <!-- Step 3: Create hr_employees table (depends on companies) -->
    <include file="/db.changelog/v1.0/03-create-hr-employees-table.xml"/>

    <!-- 
    ========================================
    VERSION 0.1-0.3 - INITIAL SCHEMA
    ========================================
    Original platform-specific tables.
    -->

    <!-- Step: Create job postings infrastructure -->
    <include file="/db.changelog/v0.1/05-create-job-postings-table.xml"/>

    <!-- Step: Create applications infrastructure -->
    <include file="/db.changelog/v0.2/06-create-applications-table.xml"/>

    <!-- Step: Migrate applications to MinIO storage -->
    <include file="/db.changelog/v0.2/07-migrate-applications-to-minio-storage.xml"/>

    <!-- Step: Create interviews infrastructure -->
    <include file="/db.changelog/v0.3/08-create-interviews-table.xml"/>

</databaseChangeLog>
